<!DOCTYPE html>
<html>
<head>
    <title>Website Ping App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        #pingContainer {
            text-align: center;
            max-width: 600px;
        }

        #pingChart {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div id="pingContainer">
        <h1>Website Ping App</h1>
        <form id="pingForm">
            <label for="urlInput">Enter Website URLs (separated by commas):</label>
            <input type="text" id="urlInput" required>
            <button type="submit">Ping</button>
        </form>
        <div>
            <canvas id="pingChart"></canvas>
        </div>
    </div>

    <script>
        const pingForm = document.getElementById('pingForm');
        const urlInput = document.getElementById('urlInput');
        const pingChart = document.getElementById('pingChart').getContext('2d');

        let pingData = {
            labels: [],
            datasets: []
        };

        let chartOptions = {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        };

        let myChart = new Chart(pingChart, {
            type: 'line',
            data: pingData,
            options: chartOptions
        });

        pingForm.addEventListener('submit', (e) => {
            e.preventDefault();
            let urls = urlInput.value.trim().split(',');
            urls.forEach(url => pingWebsite(url.trim()));
            urlInput.value = '';
        });

        setInterval(() => {
            pingData.labels.forEach(url => pingWebsite(url));
        }, 5000);

        async function pingWebsite(url) {
            let startTime = new Date().getTime();
            try {
                let response = await fetch(url, { method: 'HEAD', cache: 'no-store' });
                let endTime = new Date().getTime();
                let responseTime = endTime - startTime;
                addDataToChart(url, responseTime);
            } catch (error) {
                console.error('Error pinging website:', error);
                addDataToChart(url, 'Timeout');
            }
        }

        function addDataToChart(label, value) {
            if (!pingData.labels.includes(label)) {
                pingData.labels.push(label);
                pingData.datasets.push({
                    label: label,
                    backgroundColor: getRandomColor(),
                    borderColor: getRandomColor(),
                    borderWidth: 1,
                    data: []
                });
            }
            let datasetIndex = pingData.labels.indexOf(label);
            pingData.datasets[datasetIndex].data.push(value);
            myChart.update();
        }

        function getRandomColor() {
            return '#' + Math.floor(Math.random() * 16777215).toString(16);
        }
    </script>
</body>
</html>
